<view class="container">
  <block wx:if="{{items.length > 0}}">
    <block wx:for="{{items}}" wx:key="id">
      <view class="card cart-item">
        <image src="{{item.cover}}" class="item-cover" mode="aspectFill"></image>
        <view class="item-content">
          <view class="item-name">{{item.name}}</view>
          <view class="item-unit">规格：{{item.unit}}</view>
          <view class="flex-between">
            <view class="price">￥{{item.price}}</view>
            <view class="quantity-controller">
              <button class="quantity-btn" bindtap="changeQuantity" data-id="{{item.id}}" data-step="-1">-</button>
              <text class="quantity">{{item.quantity}}</text>
              <button class="quantity-btn" bindtap="changeQuantity" data-id="{{item.id}}" data-step="1">+</button>
            </view>
          </view>
          <view class="remove-btn" bindtap="removeItem" data-id="{{item.id}}">移除</view>
        </view>
      </view>
    </block>

    <view class="card summary-card">
      <view class="flex-between">
        <view>共 {{totalQuantity}} 件</view>
        <view class="price">合计：￥{{totalAmount}}</view>
      </view>
    </view>

    <view class="action-buttons">
      <button class="secondary-button" bindtap="goToCatalog">继续选购</button>
      <button class="primary-button" bindtap="checkout">提交订单</button>
    </view>
    <button class="danger-button" bindtap="clearCart">清空购物车</button>
  </block>

  <view wx:else class="empty-cart card">
    <view style="font-size: 36rpx; font-weight: 600; margin-bottom: 16rpx;">购物车还是空的</view>
    <view style="color: #64748b; font-size: 26rpx; margin-bottom: 32rpx;">去看看有什么好物吧～</view>
    <button class="primary-button" bindtap="goToCatalog">前往选购</button>
  </view>
</view>
